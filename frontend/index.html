
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trang ch·ªß c·ª≠a h√†ng</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header class="main-header">
  <div class="container header-container">
    <h1 class="logo">üõçÔ∏è C·ª≠a h√†ng Online</h1>
    <nav class="main-nav">
      <ul class="nav-links">
        <li><a href="index.html">Trang ch·ªß</a></li>
        <li><a href="#">S·∫£n ph·∫©m</a></li>
        <li><a href="cart.html">Gi·ªè h√†ng</a></li>
      </ul>
    </nav>
    <div class="auth-buttons">
      <a href="login.html" class="auth-link">ƒêƒÉng nh·∫≠p</a>
      <a href="register.html" class="auth-link">ƒêƒÉng k√Ω</a>
    </div>
  </div>
</header>

  <main class="container">
    <h2 class="section-title">Danh s√°ch s·∫£n ph·∫©m</h2>
    <div id="product-list" class="product-grid">
      <!-- S·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c load ·ªü ƒë√¢y b·∫±ng JavaScript -->
    </div>
  </main>

  <footer class="main-footer">
    <p>&copy; 2025 C·ª≠a h√†ng Online. All rights reserved.</p>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      const res = await fetch("http://localhost:3000/products");
      const products = await res.json();
      const container = document.getElementById("product-list");

      if (!products.length) {
        container.innerHTML = "<p>Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o.</p>";
        return;
      }

      products.forEach(product => {
        const div = document.createElement("div");
        div.className = "product-card";
        div.innerHTML = `
          <img src="${product.image}" alt="${product.name}" />
          <h3>${product.name}</h3>
          <p>${product.description}</p>
          <strong>${product.price.toLocaleString()} $</strong>
          <button>Th√™m v√†o gi·ªè</button>
        `;

          const button = div.querySelector("button");
          button.addEventListener("click", () => {
            addToCart(product);
          });
        container.appendChild(div);
      });
    });

    function addToCart(product) {
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  // Ki·ªÉm tra s·∫£n ph·∫©m ƒë√£ c√≥ ch∆∞a
  const exists = cart.find(item => item.id === product.id);
  if (!exists) {
    cart.push({
      id: product.id,
      name: product.name,
      price: product.price,
      image: product.image
    });
    localStorage.setItem('cart', JSON.stringify(cart));
    alert("ƒê√£ th√™m v√†o gi·ªè h√†ng!");
  } else {
    alert("S·∫£n ph·∫©m ƒë√£ c√≥ trong gi·ªè.");
  }
}
  </script>
</body>
</html>
